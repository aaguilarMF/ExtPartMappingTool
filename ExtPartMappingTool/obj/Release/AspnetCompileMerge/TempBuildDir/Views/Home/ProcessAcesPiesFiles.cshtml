@{
    ViewBag.Title = "Home Page";
}

@Styles.Render("~/processFilesContent/css")
@Scripts.Render("~/bundles/JQuery")
@Scripts.Render("~/bundles/modernizr")
@Scripts.Render("~/bundles/bootstrap")
@Scripts.Render("~/processFilesContent/knockoutjs")
@Scripts.Render("~/processFilesContent/Services")
@Scripts.Render("~/processFilesContent/ViewModels")

<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <!-- A box on the side to show progress-->
    <div class="affix col-md-offset-8 container">
        <br /><br /><br /><br />
        <div class="row">
            <div class="panel-group col-md-4">
                <div class="panel panel-info">
                    <div class="panel-heading">Pipeline</div>
                    <div class="panel-body" data-bind="with:pipelineStatus">
                        <div data-bind="with:Staging">
                            <div class="row">
                                -----Staging:
                            </div>
                            <div class="row" data-bind="with: uploadedToAcesPies">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Files uploaded to Aces and/or Pies
                            </div>
                            <div class="row" data-bind="with: importedAces">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Imported Aces
                            </div>
                            <div class="row" data-bind="with: importedPies">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Imported Pies
                            </div>
                            <div class="row" data-bind="with: sentToProduction">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Send Imported files to Production Server
                            </div>
                        </div>
                        <div data-bind="with:Production">
                            <div class="row">
                                -----Production:
                            </div>
                            <div class="row" data-bind="with: uploadedToAcesPies">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Files uploaded to Aces and/or Pies
                            </div>
                            <div class="row" data-bind="with: importedAces">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Imported Aces
                            </div>
                            <div class="row" data-bind="with: importedPies">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Imported Pies
                            </div>
                            <div class="row" data-bind="with: checkedComplete">
                                <button data-bind="visible: inProgress" class="btn btn-sm btn-warning"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> in progress</button>
                                <span data-bind="visible: complete" class="text-success">Success</span>
                                <span data-bind="visible: incomplete" class="text-danger">Incomplete</span>
                                ---Done
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="pm-headbar-logo" style="width:80px;">
            <img src="~/Images/logo.png" style="height:50px;width:80px;float:left;" />
        </div>
        <div>
            <ul class="nav navbar-nav">
                <li><a href="http://devtoolset.magnaflow.com/"> MagnaFlow ToolSet</a></li>
            </ul>
        </div>
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <div class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li>@Html.ActionLink("Mapping Tool", "LandingPage", "Home", new { area = "" }, null)</li>
                </ul>

            </div>
        </div>
    </div>
    <div id="Home" class="container mainContent">
        <br /><br /><br /><br />
        <div class="row">
            <div class="col-md-12">
                @*<button type="button" class="btn" data-bind="css:{'btn-primary': activeButton() == 'Truncate', 'btn-secondary': activeButton() != 'Truncate'   }">Primary</button>*@
            </div>
        </div>
        <div class="row">
            <div class="panel-group col-md-offset-4 col-md-4" data-bind="css:{'hide': hideMessagePanel()}">
                <div class="panel " data-bind="css:{'panel-primary': !error(),'panel-danger':error() }">
                    <div class="panel-heading" data-bind="text: panelMessage"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="panel-group col-md-offset-4 col-md-4" data-bind="css:{'hide': hideInfoPanel()}">
                <div class="panel panel-success">
                    <div class="panel-heading" data-bind="text: infoPanelMessage"></div>
                    <div data-bind="foreach: stagingAcesFolderContents">
                        <div class="panel-heading" data-bind="text: $data"></div>
                    </div>
                    <div data-bind="foreach: stagingPiesFolderContents">
                        <div class="panel-heading" data-bind="text: $data"></div>
                    </div>
                    <div data-bind="foreach: stagingCompleteFolderContents">
                        <div class="panel-heading" data-bind="text: $data"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-offset-4 col-md-4">
                <div class="text-center" data-bind="text: buttonPrompt"></div>
            </div>
        </div>
        <div class="row ">
            <div class="col-md-12 ">
                <div class="text-center">
                    <a class="pushme" data-bind="css: {'totalDisable click': !activeButton()}, click: pushMe">
                        <span class="inner" data-bind="text: buttonText"></span>
                    </a>
                </div>
            </div>
        </div>
    </div>




</body>

</html>
<script>
    ko.applyBindings(new ProcessAcesPiesViewModel(new StagingService(), new ProductionService() ));
</script>
